name: Deploy to Render

on:
  push:
    branches:
      - main  # Deploy when the main branch change

jobs:
  deploy:
    runs-on: ubuntu-latest  # Use Ubuntu as OS for execution

    steps:
    - name: Checkout code
      uses: actions/checkout@v2  # Code checkout

    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.11'  # Python version

    - name: Install Render CLI
      run: |
        curl -fsSL https://github.com/render-oss/cli/releases/latest/download/render-linux-amd64 -o /usr/local/bin/render
        chmod +x /usr/local/bin/render  # Descargar e instalar el CLI de Render

    - name: Deploy to Render
      run: |
        render deploy service \
          --service-id ${{ secrets.RENDER_SERVICE_ID }} \
          --api-key ${{ secrets.RENDER_API_KEY }}
      env:
        RENDER_API_KEY: ${{ secrets.RENDER_API_KEY }}  # Use
